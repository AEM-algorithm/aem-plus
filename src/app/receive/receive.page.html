<ion-header>
  <ion-toolbar>
    <ion-buttons>
      <ion-back-button defaultHref="/tabnav/wallets" text=""> </ion-back-button>
    </ion-buttons>
    <ion-title>Receive</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true">
  <ion-card class="ion-text-center">
    <ion-card-header>
      <div class="img-name-div">
        <ion-img
          [src]="receiveWallet.walletType === 'BTC' ? 'assets/img/bitcoin.png' : receiveWallet.walletType === 'NEM' ?
            'assets/img/nem-icon.png' : 'assets/img/ethereum.png'"
        >
        </ion-img>
        <ion-card-title>{{ receiveWallet.walletName }}</ion-card-title>
      </div>

      <p class="address">{{receiveWallet.walletAddress}}</p>
    </ion-card-header>

    <ion-card-content>
      <h5>Scan QR code</h5>
      <div class="qr-div"><img [src]="qrCode.src" /></div>
    </ion-card-content>
  </ion-card>

  <form #f="ngForm" (ngSubmit)="onShare(f)">
    <ion-row class="ion-align-items-center">
      <ion-col>
        <ion-label class="title"> Amount</ion-label>
      </ion-col>

      <ion-col class="ion-text-end">
        <ion-note class="amount">
          {{selectedType === 'AUD' ? amountCrypto : amountAud}} {{selectedType === 'AUD' ? receiveWallet.walletType :
          'AUD'}}
        </ion-note>
      </ion-col>
    </ion-row>

    <ion-item lines="none" class="input-shadow">
      <ion-input
        (ionChange)="onEnterAmount($event)"
        type="number"
        [(ngModel)]="enteredAmount"
        placeholder="00.00"
        name="amount"
        required
        max="maxAmount"
      ></ion-input>

      <ion-select interface="popover" [ngModel]="selectedType" name="amountType" (ionChange)="onSelectType($event)">
        <ion-select-option value="AUD"> AUD</ion-select-option>
        <ion-select-option [value]="receiveWallet.walletType">{{receiveWallet.walletType}} </ion-select-option>
      </ion-select>
    </ion-item>

    <ion-row class="ion-align-items-center tax-row">
      <ion-col class="ion-no-padding ion-no-margin">
        <ion-label class="title">Tax</ion-label>
      </ion-col>
      <ion-col class="ion-no-padding ion-no-margin">
        <ion-item lines="none" class="input-shadow ion-no-margin">
          <ion-input
            [ngModel]="selectedTax"
            type="number"
            name="selectedTax"
            placeholder="%"
            (ionChange)="onSelectTax($event)"
            required
          ></ion-input>
          <ion-text> %</ion-text>
        </ion-item>
      </ion-col>
    </ion-row>

    <h5 class="title">Receiver</h5>
    <ion-item lines="none" class="input-shadow">
      <ion-input
        [(ngModel)]="recipientName"
        name="recipientName"
        (ionChange)="updateQR()"
        placeholder="Reveiver (Business) Name"
      ></ion-input>
    </ion-item>

    <h5 class="title">Invoice description</h5>
    <ion-item lines="none" class="input-shadow">
      <ion-input
        type="text"
        [(ngModel)]="message"
        name="message"
        (ionChange)="updateQR()"
        placeholder="e.g. Rent & bills"
      ></ion-input>
    </ion-item>

    <ion-row class="ion-align-items-center">
      <ion-col>
        <h5 class="title">Issuer</h5>
      </ion-col>

      <ion-col class="ion-text-end">
        <ion-button fill="clear"> Edit </ion-button>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col class="user-info">
        <p class="business-name">{{user.businessName}}</p>
        <p class="ion-text-wrap">{{user.address}}</p>
        <p><b>ABN</b>: {{user.ABN}}</p>
        <p><b>Email</b>: {{user.email}}</p>
      </ion-col>
    </ion-row>

    <div class="share-btn">
      <ion-button class="btn-gradient-bg" expand="block" type="submit" [disabled]="f.invalid">Share</ion-button>
    </div>
  </form>
</ion-content>
